<h1>Driver Dashboard</h1>

<div class="row">
  <div class="col s8 offset-s2">
    <ul class="collection with-header">
    <% if @driver_ride %>
      <li class="collection-header center"><h4>Current Ride</h4></li>
      <li class=collection-item>
        Pickup: <%= @driver_ride.pickup %> |
        Dropoff: <%= @driver_ride.dropoff %> |
        Passengers: <%= @driver_ride.passengers %>
        <span><i class="secondary-content">Status: <%= @driver_ride.status %>
        <% if @driver_ride.status == "accepted" %>
          <%= link_to 'Pick up Rider', ride_path(@driver_ride), method: :put %>
        <% elsif @driver_ride.status == "picked up" %>
          <%= link_to 'Complete Ride', ride_path(@driver_ride), method: :put %>
        <% end %></i></span></li>
    <% else %>
     <% if active_rides.count != 0 %>
      <li class="collection-header center"><h4>Available Rides</h4></li>
      <% active_rides.each do |ride| %>
        <li class=collection-item>
          <%= ride.pickup %> | 
          <%= ride.dropoff %> | 
          <%= ride.passengers %><span><i class="secondary-content"><%= link_to 'Accept Ride', ride_path(ride), method: :put %></i></span></li>
      <% end %>
     <% else %>
        <h2>Sorry, there are currently no rides available</h2>
     <% end %>
     <% end %>
    </ul>
  </div>
</div>
<div class="row">
  <div class="col s10 offset-s1">
      <% if @completed.count != 0 %>
        <%= render "shared/completed", locals: { completed: @completed } %>
     <% end %>
  </div>
</div>


